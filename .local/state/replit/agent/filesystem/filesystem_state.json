{"file_contents":{"Database.php":{"content":"<?php\nclass Database {\n    private static $instance = null;\n    private $connection;\n    \n    private function __construct() {\n        try {\n            $this->connection = new PDO('sqlite:' . Config::$db_path);\n            $this->connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n            $this->createTables();\n        } catch (PDOException $e) {\n            die(\"Database connection failed: \" . $e->getMessage());\n        }\n    }\n    \n    public static function getInstance() {\n        if (self::$instance === null) {\n            self::$instance = new Database();\n        }\n        return self::$instance;\n    }\n    \n    public function getConnection() {\n        return $this->connection;\n    }\n    \n    private function createTables() {\n        $sql = \"CREATE TABLE IF NOT EXISTS users (\n            id INTEGER PRIMARY KEY AUTOINCREMENT,\n            username VARCHAR(80) NOT NULL UNIQUE,\n            email VARCHAR(120) NOT NULL UNIQUE,\n            password VARCHAR(255) NOT NULL\n        )\";\n        $this->connection->exec($sql);\n    }\n}\n?>","size_bytes":1066},"StreamManager.php":{"content":"<?php\nclass StreamManager {\n    \n    public static function loadStreams() {\n        if (!file_exists(Config::$streams_file)) {\n            return [];\n        }\n        $content = file_get_contents(Config::$streams_file);\n        return json_decode($content, true) ?: [];\n    }\n    \n    public static function saveStreams($streams) {\n        return file_put_contents(Config::$streams_file, json_encode($streams, JSON_PRETTY_PRINT));\n    }\n    \n    public static function loadChat() {\n        if (!file_exists(Config::$chat_file)) {\n            return [];\n        }\n        $content = file_get_contents(Config::$chat_file);\n        return json_decode($content, true) ?: [];\n    }\n    \n    public static function saveChat($chat) {\n        return file_put_contents(Config::$chat_file, json_encode($chat, JSON_PRETTY_PRINT));\n    }\n    \n    public static function addChatMessage($user, $message) {\n        $chat = self::loadChat();\n        $chat[] = ['user' => $user, 'message' => $message];\n        return self::saveChat($chat);\n    }\n    \n    public static function containsProfanity($text) {\n        $text = strtolower($text);\n        foreach (Config::$profanity_words as $word) {\n            if (strpos($text, $word) !== false) {\n                return true;\n            }\n        }\n        return false;\n    }\n    \n    public static function cleanMessage($text) {\n        $words = explode(' ', $text);\n        foreach ($words as &$word) {\n            if (in_array(strtolower($word), Config::$profanity_words)) {\n                $word = str_repeat('*', strlen($word));\n            }\n        }\n        return implode(' ', $words);\n    }\n}\n?>","size_bytes":1639},"User.php":{"content":"<?php\nrequire_once 'Database.php';\n\nclass User {\n    private $db;\n    public $id;\n    public $username;\n    public $email;\n    public $password;\n    \n    public function __construct() {\n        $this->db = Database::getInstance()->getConnection();\n    }\n    \n    public static function hashPassword($password) {\n        return password_hash($password, PASSWORD_BCRYPT);\n    }\n    \n    public function checkPassword($password) {\n        return password_verify($password, $this->password);\n    }\n    \n    public function save() {\n        if ($this->id) {\n            // Update existing user\n            $stmt = $this->db->prepare(\"UPDATE users SET username = ?, email = ?, password = ? WHERE id = ?\");\n            return $stmt->execute([$this->username, $this->email, $this->password, $this->id]);\n        } else {\n            // Create new user\n            $stmt = $this->db->prepare(\"INSERT INTO users (username, email, password) VALUES (?, ?, ?)\");\n            if ($stmt->execute([$this->username, $this->email, $this->password])) {\n                $this->id = $this->db->lastInsertId();\n                return true;\n            }\n            return false;\n        }\n    }\n    \n    public static function findByEmail($email) {\n        $db = Database::getInstance()->getConnection();\n        $stmt = $db->prepare(\"SELECT * FROM users WHERE email = ?\");\n        $stmt->execute([$email]);\n        $userData = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        if ($userData) {\n            $user = new User();\n            $user->id = $userData['id'];\n            $user->username = $userData['username'];\n            $user->email = $userData['email'];\n            $user->password = $userData['password'];\n            return $user;\n        }\n        return null;\n    }\n    \n    public static function exists($username, $email) {\n        $db = Database::getInstance()->getConnection();\n        $stmt = $db->prepare(\"SELECT COUNT(*) FROM users WHERE username = ? OR email = ?\");\n        $stmt->execute([$username, $email]);\n        return $stmt->fetchColumn() > 0;\n    }\n}\n?>","size_bytes":2066},"app.py":{"content":"from flask import Flask, render_template, request, redirect, url_for, session, flash, jsonify\nimport json, os, time\nfrom urllib.parse import quote\nfrom collections import defaultdict\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_bcrypt import Bcrypt\nfrom models import db, bcrypt, User\n\napp = Flask(__name__)\napp.secret_key = 'your_very_strong_secret_key'\n\n# Database Configuration\napp.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///users.db'\napp.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False\n\ndb.init_app(app)\nbcrypt.init_app(app)\n\n# File paths\nSTREAMS_FILE = os.path.join(os.path.dirname(__file__), 'streams.json')\nCHAT_FILE = os.path.join(os.path.dirname(__file__), 'chat.json')\n\n# Admin credentials\nADMIN_USERNAME = 'admin'\nADMIN_PASSWORD = 'Pcyber50@'\n\n# Rate limiting\nRATE_LIMIT = defaultdict(list)\nMAX_MESSAGES_PER_MINUTE = 5\n\n# Profanity filter\nPROFANITY_WORDS = {'sex', 'blood', 'bitch'}\n\n# Pagination\nSTREAMS_PER_PAGE = 10\n\ndef load_json(file):\n    if not os.path.exists(file):\n        return []\n    with open(file, 'r') as f:\n        return json.load(f)\n\ndef save_json(file, data):\n    with open(file, 'w') as f:\n        json.dump(data, f, indent=4)\n\ndef contains_profanity(text):\n    return any(word in text.lower() for word in PROFANITY_WORDS)\n\ndef clean_message(text):\n    words = text.split()\n    return ' '.join('*' * len(word) if word.lower() in PROFANITY_WORDS else word for word in words)\n\n@app.template_filter('url_encode')\ndef url_encode_filter(s):\n    return quote(s)\n\ndef get_client_ip():\n    if request.environ.get('HTTP_X_FORWARDED_FOR'):\n        return request.environ['HTTP_X_FORWARDED_FOR'].split(',')[0].strip()\n    return request.remote_addr or 'untracked'\n\n# ===================== User Authentication ===================== #\n\n@app.route('/signup', methods=['GET', 'POST'])\ndef signup():\n    if request.method == 'POST':\n        username = request.form['username']\n        email = request.form['email']\n        raw_password = request.form['password']\n\n        if User.query.filter((User.username == username) | (User.email == email)).first():\n            flash(\"Username or email already exists.\", \"warning\")\n            return redirect(url_for('signup'))\n\n        hashed_password = User.hash_password(raw_password)\n        new_user = User(username=username, email=email, password=hashed_password)\n        db.session.add(new_user)\n        db.session.commit()\n\n        flash(\"Signup successful. Please log in.\", \"success\")\n        return redirect(url_for('login'))\n\n    return render_template('signup.html')\n\n@app.route('/login', methods=['GET', 'POST'])\ndef login():\n    if request.method == 'POST':\n        email = request.form['email']\n        password = request.form['password']\n        user = User.query.filter_by(email=email).first()\n\n        if user and user.check_password(password):\n            session['user_id'] = user.id\n            session['username'] = user.username\n            flash(f\"Welcome back, {user.username}!\", 'success')\n            return redirect(url_for('dashboard'))\n\n        flash('Invalid email or password', 'danger')\n    return render_template('login.html')\n\n@app.route('/dashboard')\ndef dashboard():\n    if 'user_id' not in session:\n        flash(\"You must be logged in to view the dashboard.\", \"warning\")\n        return redirect(url_for('login'))\n\n    return render_template('dashboard.html', username=session['username'])\n\n@app.route('/logout-user')\ndef logout_user():\n    session.pop('user_id', None)\n    session.pop('username', None)\n    flash(\"Logged out successfully\", \"info\")\n    return redirect(url_for('login'))\n\n# ===================== Public Routes ===================== #\n\n@app.route('/')\ndef index():\n    streams = load_json(STREAMS_FILE)\n    initial_streams = streams[:6]\n    return render_template('index.html', streams=initial_streams, selected_category=None)\n\n@app.route('/load_more_streams')\ndef load_more_streams():\n    try:\n        offset = int(request.args.get('offset', 0))\n        limit = int(request.args.get('limit', 6))\n        all_streams = load_json(STREAMS_FILE)\n        sliced = all_streams[offset:offset + limit]\n        has_more = offset + limit < len(all_streams)\n\n        return jsonify({\n            'streams': [\n                {\n                    'title': s['title'],\n                    'platform': s['platform'],\n                    'video_id': s['video_id'],\n                    'category': s['category']\n                } for s in sliced\n            ],\n            'has_more': has_more\n        })\n    except Exception as e:\n        return jsonify({'error': str(e)}), 500\n\n@app.route('/category/<category_name>')\ndef category(category_name):\n    streams = load_json(STREAMS_FILE)\n    filtered_streams = [s for s in streams if s.get('category', '').lower() == category_name.lower()]\n    return render_template('index.html', streams=filtered_streams, selected_category=category_name)\n\n@app.route('/chat', methods=['POST'])\ndef chat():\n    user = request.form['user']\n    message = request.form['message']\n    ip = get_client_ip()\n    now = time.time()\n\n    RATE_LIMIT[ip] = [t for t in RATE_LIMIT[ip] if now - t < 60]\n    if len(RATE_LIMIT[ip]) >= MAX_MESSAGES_PER_MINUTE:\n        return \"You're sending messages too fast. Please wait.\", 429\n\n    if contains_profanity(message):\n        message = clean_message(message)\n\n    chat = load_json(CHAT_FILE)\n    chat.append({'user': user, 'message': message})\n    save_json(CHAT_FILE, chat)\n    RATE_LIMIT[ip].append(now)\n\n    return redirect(url_for('index'))\n\n# ===================== Admin Authentication ===================== #\n\n@app.route('/admin-login', methods=['GET', 'POST'])\ndef admin_login():\n    if request.method == 'POST':\n        if request.form['username'] == ADMIN_USERNAME and request.form['password'] == ADMIN_PASSWORD:\n            session['admin'] = True\n            return redirect(url_for('admin'))\n        else:\n            flash('Invalid admin username or password', 'danger')\n    return render_template('admin_login.html')\n\n@app.route('/logout')\ndef logout():\n    session.pop('admin', None)\n    flash('You have been logged out.', 'info')\n    return redirect(url_for('admin_login'))\n\n# ===================== Admin Panel ===================== #\n\n@app.route('/admin', methods=['GET', 'POST'])\ndef admin():\n    if not session.get('admin'):\n        return redirect(url_for('admin_login'))\n\n    if request.method == 'POST':\n        title = request.form['title']\n        platform = request.form['platform']\n        video_id = request.form['video_id']\n        category = request.form['category']\n\n        streams = load_json(STREAMS_FILE)\n        streams.insert(0, {\n            'title': title,\n            'platform': platform,\n            'video_id': video_id,\n            'category': category\n        })\n        save_json(STREAMS_FILE, streams)\n        return redirect(url_for('admin'))\n\n    streams = load_json(STREAMS_FILE)\n    search_query = request.args.get('search', '').strip().lower()\n\n    if search_query:\n        streams = [s for s in streams if search_query in s.get('title', '').lower() or\n                   search_query in s.get('platform', '').lower() or\n                   search_query in s.get('category', '').lower()]\n\n    page = request.args.get('page', 1, type=int)\n    total_pages = (len(streams) + STREAMS_PER_PAGE - 1) // STREAMS_PER_PAGE\n    start = (page - 1) * STREAMS_PER_PAGE\n    end = start + STREAMS_PER_PAGE\n    paginated_streams = streams[start:end]\n\n    return render_template('admin.html', streams=paginated_streams, page=page, total_pages=total_pages, search=search_query)\n\n@app.route('/edit/<int:index>', methods=['GET', 'POST'])\ndef edit(index):\n    if not session.get('admin'):\n        return redirect(url_for('admin_login'))\n\n    streams = load_json(STREAMS_FILE)\n    if not (0 <= index < len(streams)):\n        return \"Stream not found\", 404\n\n    if request.method == 'POST':\n        streams[index]['title'] = request.form['title']\n        streams[index]['platform'] = request.form['platform']\n        streams[index]['video_id'] = request.form['video_id']\n        streams[index]['category'] = request.form['category']\n        save_json(STREAMS_FILE, streams)\n        return redirect(url_for('admin'))\n\n    stream = streams[index]\n    return render_template('edit.html', stream=stream, index=index)\n\n@app.route('/delete/<int:index>', methods=['POST'])\ndef delete(index):\n    if not session.get('admin'):\n        return redirect(url_for('admin_login'))\n\n    streams = load_json(STREAMS_FILE)\n    if 0 <= index < len(streams):\n        del streams[index]\n        save_json(STREAMS_FILE, streams)\n    return redirect(url_for('admin'))\n\n@app.route('/stream/<int:stream_id>')\ndef stream(stream_id):\n    streams = load_json(STREAMS_FILE)\n    if 0 <= stream_id < len(streams):\n        return render_template('stream.html', stream=streams[stream_id])\n    return \"Stream not found\", 404\n\n# ===================== Run App ===================== #\n\nif __name__ == '__main__':\n    with app.app_context():\n        db.create_all()\n    app.run(host='0.0.0.0', port=5000, debug=True)\n   \n","size_bytes":9081},"config.php":{"content":"<?php\nclass Config {\n    // Database configuration\n    public static $db_path = 'instance/users.db';\n    \n    // Admin credentials\n    public static $admin_username = 'admin';\n    public static $admin_password = 'Pcyber50@';\n    \n    // Application settings\n    public static $secret_key = 'your_very_strong_secret_key';\n    public static $streams_per_page = 10;\n    public static $max_messages_per_minute = 5;\n    \n    // Profanity filter words\n    public static $profanity_words = ['sex', 'blood', 'bitch'];\n    \n    // File paths\n    public static $streams_file = 'streams.json';\n    public static $chat_file = 'chat.json';\n}\n?>","size_bytes":631},"config.py":{"content":"import os\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\nclass Config:\n    SECRET_KEY = os.getenv('SECRET_KEY', 'default-secret')\n    SQLALCHEMY_DATABASE_URI = f\"mysql+pymysql://{os.getenv('DB_USER')}:{os.getenv('DB_PASSWORD')}@{os.getenv('DB_HOST')}/{os.getenv('DB_NAME')}\"\n    SQLALCHEMY_TRACK_MODIFICATIONS = False\n\n\n\n","size_bytes":321},"index.php":{"content":"<?php\nsession_start();\nrequire_once 'config.php';\nrequire_once 'Database.php';\nrequire_once 'User.php';\nrequire_once 'StreamManager.php';\n\n// Rate limiting (basic implementation using session)\nif (!isset($_SESSION['rate_limit'])) {\n    $_SESSION['rate_limit'] = [];\n}\n\n// Basic routing\n$request_uri = $_SERVER['REQUEST_URI'];\n$path = parse_url($request_uri, PHP_URL_PATH);\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Remove query parameters for routing\n$route = strtok($path, '?');\n\n// Handle different routes\nswitch ($route) {\n    case '/':\n        showHomePage();\n        break;\n    case '/login':\n        if ($method === 'POST') {\n            handleLogin();\n        } else {\n            showLoginPage();\n        }\n        break;\n    case '/signup':\n        if ($method === 'POST') {\n            handleSignup();\n        } else {\n            showSignupPage();\n        }\n        break;\n    case '/dashboard':\n        showDashboard();\n        break;\n    case '/logout-user':\n        logoutUser();\n        break;\n    case '/admin-login':\n        if ($method === 'POST') {\n            handleAdminLogin();\n        } else {\n            showAdminLoginPage();\n        }\n        break;\n    case '/admin':\n        if ($method === 'POST') {\n            handleAdminAddStream();\n        } else {\n            showAdminPage();\n        }\n        break;\n    case '/logout':\n        logoutAdmin();\n        break;\n    case '/chat':\n        if ($method === 'POST') {\n            handleChat();\n        }\n        break;\n    case '/load_more_streams':\n        handleLoadMoreStreams();\n        break;\n    default:\n        // Handle dynamic routes\n        if (preg_match('/^\\/category\\/(.+)$/', $route, $matches)) {\n            showCategoryPage($matches[1]);\n        } elseif (preg_match('/^\\/stream\\/(\\d+)$/', $route, $matches)) {\n            showStreamPage((int)$matches[1]);\n        } elseif (preg_match('/^\\/edit\\/(\\d+)$/', $route, $matches)) {\n            if ($method === 'POST') {\n                handleEditStream((int)$matches[1]);\n            } else {\n                showEditPage((int)$matches[1]);\n            }\n        } elseif (preg_match('/^\\/delete\\/(\\d+)$/', $route, $matches)) {\n            if ($method === 'POST') {\n                handleDeleteStream((int)$matches[1]);\n            }\n        } else {\n            http_response_code(404);\n            echo \"Page not found\";\n        }\n        break;\n}\n\nfunction showHomePage() {\n    $streams = StreamManager::loadStreams();\n    $initial_streams = array_slice($streams, 0, 6);\n    include 'templates/index.php';\n}\n\nfunction showLoginPage() {\n    include 'templates/login.php';\n}\n\nfunction handleLogin() {\n    $email = $_POST['email'] ?? '';\n    $password = $_POST['password'] ?? '';\n    \n    $user = User::findByEmail($email);\n    if ($user && $user->checkPassword($password)) {\n        $_SESSION['user_id'] = $user->id;\n        $_SESSION['username'] = $user->username;\n        $_SESSION['message'] = \"Welcome back, {$user->username}!\";\n        $_SESSION['message_type'] = 'success';\n        header('Location: /dashboard');\n        exit;\n    } else {\n        $_SESSION['message'] = 'Invalid email or password';\n        $_SESSION['message_type'] = 'danger';\n        header('Location: /login');\n        exit;\n    }\n}\n\nfunction showSignupPage() {\n    include 'templates/signup.php';\n}\n\nfunction handleSignup() {\n    $username = $_POST['username'] ?? '';\n    $email = $_POST['email'] ?? '';\n    $password = $_POST['password'] ?? '';\n    \n    if (User::exists($username, $email)) {\n        $_SESSION['message'] = \"Username or email already exists.\";\n        $_SESSION['message_type'] = 'warning';\n        header('Location: /signup');\n        exit;\n    }\n    \n    $user = new User();\n    $user->username = $username;\n    $user->email = $email;\n    $user->password = User::hashPassword($password);\n    \n    if ($user->save()) {\n        $_SESSION['message'] = \"Signup successful. Please log in.\";\n        $_SESSION['message_type'] = 'success';\n        header('Location: /login');\n        exit;\n    } else {\n        $_SESSION['message'] = \"Error creating account.\";\n        $_SESSION['message_type'] = 'danger';\n        header('Location: /signup');\n        exit;\n    }\n}\n\nfunction showDashboard() {\n    if (!isset($_SESSION['user_id'])) {\n        $_SESSION['message'] = \"You must be logged in to view the dashboard.\";\n        $_SESSION['message_type'] = 'warning';\n        header('Location: /login');\n        exit;\n    }\n    include 'templates/dashboard.php';\n}\n\nfunction logoutUser() {\n    unset($_SESSION['user_id']);\n    unset($_SESSION['username']);\n    $_SESSION['message'] = \"Logged out successfully\";\n    $_SESSION['message_type'] = 'info';\n    header('Location: /login');\n    exit;\n}\n\nfunction showAdminLoginPage() {\n    include 'templates/admin_login.php';\n}\n\nfunction handleAdminLogin() {\n    $username = $_POST['username'] ?? '';\n    $password = $_POST['password'] ?? '';\n    \n    if ($username === Config::$admin_username && $password === Config::$admin_password) {\n        $_SESSION['admin'] = true;\n        header('Location: /admin');\n        exit;\n    } else {\n        $_SESSION['message'] = 'Invalid admin username or password';\n        $_SESSION['message_type'] = 'danger';\n        header('Location: /admin-login');\n        exit;\n    }\n}\n\nfunction showAdminPage() {\n    if (!isset($_SESSION['admin'])) {\n        header('Location: /admin-login');\n        exit;\n    }\n    \n    $streams = StreamManager::loadStreams();\n    $search_query = $_GET['search'] ?? '';\n    \n    if ($search_query) {\n        $search_query = strtolower(trim($search_query));\n        $streams = array_filter($streams, function($stream) use ($search_query) {\n            return strpos(strtolower($stream['title'] ?? ''), $search_query) !== false ||\n                   strpos(strtolower($stream['platform'] ?? ''), $search_query) !== false ||\n                   strpos(strtolower($stream['category'] ?? ''), $search_query) !== false;\n        });\n    }\n    \n    $page = (int)($_GET['page'] ?? 1);\n    $total_pages = ceil(count($streams) / Config::$streams_per_page);\n    $start = ($page - 1) * Config::$streams_per_page;\n    $paginated_streams = array_slice($streams, $start, Config::$streams_per_page);\n    \n    include 'templates/admin.php';\n}\n\nfunction handleAdminAddStream() {\n    if (!isset($_SESSION['admin'])) {\n        header('Location: /admin-login');\n        exit;\n    }\n    \n    $title = $_POST['title'] ?? '';\n    $platform = $_POST['platform'] ?? '';\n    $video_id = $_POST['video_id'] ?? '';\n    $category = $_POST['category'] ?? '';\n    \n    $streams = StreamManager::loadStreams();\n    array_unshift($streams, [\n        'title' => $title,\n        'platform' => $platform,\n        'video_id' => $video_id,\n        'category' => $category\n    ]);\n    \n    StreamManager::saveStreams($streams);\n    header('Location: /admin');\n    exit;\n}\n\nfunction logoutAdmin() {\n    unset($_SESSION['admin']);\n    $_SESSION['message'] = 'You have been logged out.';\n    $_SESSION['message_type'] = 'info';\n    header('Location: /admin-login');\n    exit;\n}\n\nfunction handleChat() {\n    $user = $_POST['user'] ?? '';\n    $message = $_POST['message'] ?? '';\n    $ip = $_SERVER['REMOTE_ADDR'] ?? 'unknown';\n    $now = time();\n    \n    // Basic rate limiting\n    if (!isset($_SESSION['rate_limit'][$ip])) {\n        $_SESSION['rate_limit'][$ip] = [];\n    }\n    \n    $_SESSION['rate_limit'][$ip] = array_filter($_SESSION['rate_limit'][$ip], function($time) use ($now) {\n        return $now - $time < 60;\n    });\n    \n    if (count($_SESSION['rate_limit'][$ip]) >= Config::$max_messages_per_minute) {\n        http_response_code(429);\n        echo \"You're sending messages too fast. Please wait.\";\n        exit;\n    }\n    \n    if (StreamManager::containsProfanity($message)) {\n        $message = StreamManager::cleanMessage($message);\n    }\n    \n    StreamManager::addChatMessage($user, $message);\n    $_SESSION['rate_limit'][$ip][] = $now;\n    \n    header('Location: /');\n    exit;\n}\n\nfunction handleLoadMoreStreams() {\n    $offset = (int)($_GET['offset'] ?? 0);\n    $limit = (int)($_GET['limit'] ?? 6);\n    $all_streams = StreamManager::loadStreams();\n    $sliced = array_slice($all_streams, $offset, $limit);\n    $has_more = $offset + $limit < count($all_streams);\n    \n    header('Content-Type: application/json');\n    echo json_encode([\n        'streams' => array_map(function($s) {\n            return [\n                'title' => $s['title'] ?? '',\n                'platform' => $s['platform'] ?? '',\n                'video_id' => $s['video_id'] ?? '',\n                'category' => $s['category'] ?? ''\n            ];\n        }, $sliced),\n        'has_more' => $has_more\n    ]);\n}\n\nfunction showCategoryPage($category_name) {\n    $streams = StreamManager::loadStreams();\n    $filtered_streams = array_filter($streams, function($stream) use ($category_name) {\n        return strtolower($stream['category'] ?? '') === strtolower($category_name);\n    });\n    $selected_category = $category_name;\n    include 'templates/index.php';\n}\n\nfunction showStreamPage($stream_id) {\n    $streams = StreamManager::loadStreams();\n    if ($stream_id >= 0 && $stream_id < count($streams)) {\n        $stream = $streams[$stream_id];\n        include 'templates/stream.php';\n    } else {\n        http_response_code(404);\n        echo \"Stream not found\";\n    }\n}\n\nfunction showEditPage($index) {\n    if (!isset($_SESSION['admin'])) {\n        header('Location: /admin-login');\n        exit;\n    }\n    \n    $streams = StreamManager::loadStreams();\n    if ($index >= 0 && $index < count($streams)) {\n        $stream = $streams[$index];\n        include 'templates/edit.php';\n    } else {\n        http_response_code(404);\n        echo \"Stream not found\";\n    }\n}\n\nfunction handleEditStream($index) {\n    if (!isset($_SESSION['admin'])) {\n        header('Location: /admin-login');\n        exit;\n    }\n    \n    $streams = StreamManager::loadStreams();\n    if ($index >= 0 && $index < count($streams)) {\n        $streams[$index]['title'] = $_POST['title'] ?? '';\n        $streams[$index]['platform'] = $_POST['platform'] ?? '';\n        $streams[$index]['video_id'] = $_POST['video_id'] ?? '';\n        $streams[$index]['category'] = $_POST['category'] ?? '';\n        StreamManager::saveStreams($streams);\n    }\n    header('Location: /admin');\n    exit;\n}\n\nfunction handleDeleteStream($index) {\n    if (!isset($_SESSION['admin'])) {\n        header('Location: /admin-login');\n        exit;\n    }\n    \n    $streams = StreamManager::loadStreams();\n    if ($index >= 0 && $index < count($streams)) {\n        array_splice($streams, $index, 1);\n        StreamManager::saveStreams($streams);\n    }\n    header('Location: /admin');\n    exit;\n}\n?>","size_bytes":10714},"models.py":{"content":"from flask_sqlalchemy import SQLAlchemy\nfrom flask_bcrypt import Bcrypt\n\ndb = SQLAlchemy()\nbcrypt = Bcrypt()\n\nclass User(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    username = db.Column(db.String(80), unique=True, nullable=False)\n    email = db.Column(db.String(120), unique=True, nullable=False)\n    password = db.Column(db.String(255), nullable=False)\n\n    @staticmethod\n    def hash_password(password):\n        return bcrypt.generate_password_hash(password).decode('utf-8')\n\n    def check_password(self, password):\n        return bcrypt.check_password_hash(self.password, password)\n","size_bytes":605},"passenger_wsgi.py":{"content":"import importlib.machinery\nimport importlib.util\nimport os\nimport sys\n\n\nsys.path.insert(0, os.path.dirname(__file__))\n\ndef load_source(modname, filename):\n    loader = importlib.machinery.SourceFileLoader(modname, filename)\n    spec = importlib.util.spec_from_file_location(modname, filename, loader=loader)\n    module = importlib.util.module_from_spec(spec)\n    loader.exec_module(module)\n    return module\n\nwsgi = load_source('wsgi', 'app.py')\napplication = wsgi.app\n","size_bytes":469},"replit.md":{"content":"# Overview\n\nThis is a Flask-based live streaming platform called \"PCYBER TV\" that allows users to view sports streams and participate in live chat. The platform features a public interface for viewing streams, an admin dashboard for managing content, and a real-time chat system. The application supports both YouTube and Facebook video embeds, with category-based organization and pagination for better user experience.\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n# System Architecture\n\n## Frontend Architecture\nThe application uses server-side templating with Jinja2 and Bootstrap 5 for responsive design. It implements a dual-theme system (light/dark mode) with CSS custom properties for consistent styling across all pages. The interface includes:\n\n- Public stream viewing pages with embedded video players\n- Admin dashboard with stream management capabilities  \n- User authentication forms with modern glass-morphism design\n- Real-time chat interface with profanity filtering\n- Responsive navigation with sticky header\n\n## Backend Architecture\nBuilt on Flask with a modular structure separating concerns:\n\n- **Models**: SQLAlchemy ORM with User model for authentication\n- **Authentication**: Flask-Bcrypt for password hashing with hardcoded admin credentials\n- **Data Storage**: Hybrid approach using SQLite for users and JSON files for streams/chat\n- **Rate Limiting**: In-memory rate limiting using defaultdict for chat messages\n- **Content Filtering**: Basic profanity filter with configurable word list\n\n## Data Storage Solutions\nThe application uses a mixed data storage approach:\n\n- **SQLite Database**: Stores user accounts with encrypted passwords\n- **JSON Files**: Stores streams metadata (title, platform, video_id, category) and chat messages\n- **File-based Configuration**: Uses environment variables for database connections with fallback to hardcoded values\n\n## Authentication and Authorization\nImplements a simple two-tier authentication system:\n\n- **Admin Access**: Hardcoded credentials for administrative functions\n- **User Registration**: SQLAlchemy User model with bcrypt password hashing\n- **Session Management**: Flask sessions for maintaining login state\n- **Route Protection**: Decorator-based access control for admin routes\n\n## External Dependencies\n\n- **Bootstrap 5**: Frontend UI framework for responsive design\n- **Font Awesome**: Icon library for enhanced user interface\n- **YouTube API**: Embedded video players for YouTube streams\n- **Facebook Videos**: Direct iframe embedding for Facebook video content\n- **Flask Ecosystem**: SQLAlchemy for ORM, Bcrypt for password hashing\n- **Database Options**: Configured for both SQLite (development) and MySQL (production via environment variables)","size_bytes":2762},"static/admin.css":{"content":"\n :root {\n      --bg-color: #f8f9fa;\n      --text-color: #212529;\n      --card-bg: #fff;\n    }\n\n    body.dark-mode {\n      --bg-color: #01002c;\n      --text-color: #f1f1f1;\n      --card-bg: rgba(255, 255, 255, 0.05);\n      --accent: #4dabf7;\n      --badge-bg: #1a1e2d;\n    }\n\n    body {\n      background-color: var(--bg-color);\n      color: var(--text-color);\n      font-family: 'Inter', sans-serif;\n      min-height: 100vh;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      padding: 2rem;\n      text-align: center;\n    }\n\n    .logo {\n      max-width: 120px;\n      margin-bottom: 1rem;\n    }\n\n    .card {\n      background: var(--card-bg);\n      color: var(--text-color);\n      border-radius: 16px;\n      padding: 2rem 2.5rem;\n      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);\n      backdrop-filter: blur(18px);\n      -webkit-backdrop-filter: blur(18px);\n      border: 1px solid rgba(255, 255, 255, 0.08);\n      width: 100%;\n      max-width: 400px;\n    }\n\n    .theme-toggle {\n      position: absolute;\n      top: 1rem;\n      right: 1rem;\n      background: none;\n      border: none;\n      font-size: 1.5rem;\n      cursor: pointer;\n      color: var(--text-color);\n    }\n\n    .form-control::placeholder {\n      color: var(--text-color);\n      opacity: 0.6;\n    }\n\n    .form-control:focus {\n      border-color: #0d6efd;\n      box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);\n    }","size_bytes":1442},"static/styles.css":{"content":":root {\n      --bg-color: #f8f9fa;\n      --text-color: #212529;\n      --navbar-bg: #0d6efd;\n      --badge-bg: #0d6efd;\n      --card-bg: #fff;\n      --accent: #0d6efd;\n    }\n    body.dark-mode {\n      --bg-color: #01002c;\n      --text-color: #f1f1f1;\n      --navbar-bg: #1a1e2d;\n      --badge-bg: #4dabf7;\n      --card-bg: rgba(255 255 255 / 0.05);\n      --accent: #4dabf7;\n    }\n    body {\n      background-color: var(--bg-color);\n      color: var(--text-color);\n      font-family: 'Inter', sans-serif;\n      margin: 0;\n      min-height: 100vh;\n    }\n    nav.navbar {\n      background-color: var(--navbar-bg);\n      display: flex;\n      align-items: center;\n      padding: 0.5rem 1rem;\n      position: sticky;\n      top: 0;\n      z-index: 1000;\n    }\n    .navbar-brand {\n      color: #fff;\n      font-weight: 600;\n      font-size: 1.25rem;\n      text-decoration: none;\n    }\n    .theme-toggle {\n      margin-left: auto;\n      background: none;\n      border: none;\n      font-size: 1.5rem;\n      color: #fff;\n      cursor: pointer;\n    }\n    .container {\n      max-width: 1100px;\n      margin: 2rem auto;\n      padding: 1rem 2rem;\n      background: var(--card-bg);\n      border-radius: 16px;\n      box-shadow: 0 12px 30px rgba(0,0,0,0.3);\n      backdrop-filter: blur(18px);\n      border: 1px solid rgba(255 255 255 / 0.08);\n    }\n    .video-wrapper {\n      width: 80%;\n      margin: 2rem auto;\n    }\n    .video-frame {\n      width: 100%;\n      height: 500px;\n      border: none;\n      border-radius: 16px;\n      background: var(--card-bg);\n      box-shadow: 0 8px 20px rgba(0,0,0,0.2);\n    }\n    .streams-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));\n      gap: 2rem;\n    }\n    .stream-card {\n      background: var(--card-bg);\n      border-radius: 2px;\n      box-shadow: 0 4px 15px rgba(13, 110, 253, 0.1);\n      transition: transform 0.3s ease, box-shadow 0.3s ease;\n      display: flex;\n      flex-direction: column;\n    }\n    .stream-card:hover {\n      transform: translateY(-6px);\n      box-shadow: 0 6px 20px rgba(13, 110, 253, 0.2);\n    }\n    .stream-video {\n      position: relative;\n      padding-top: 56.25%;\n      overflow: hidden;\n      border-radius: 12px 12px 0 0;\n    }\n    .stream-video iframe {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      border: none;\n    }\n    .stream-content {\n      padding: 1rem;\n      flex-grow: 1;\n    }\n    .stream-title {\n      font-size: 1.15rem;\n      font-weight: 600;\n      margin-bottom: 0.5rem;\n    }\n    .chat-frame {\n      width: 100%;\n      height: 500px;\n      border: none;\n      border-radius: 16px;\n    }\n    .local-chat {\n      height: 200px;\n      overflow-y: auto;\n      padding: 1rem;\n      background: var(--card-bg);\n      border: 1px solid rgba(255,255,255,0.1);\n      border-radius: 12px;\n      font-size: 0.9rem;\n    }\n    .local-chat-form input {\n      border-radius: 30px;\n      background: transparent;\n      color: var(--text-color);\n      border: 1px solid rgba(255,255,255,0.1);\n      padding-left: 1rem;\n    }\n    .local-chat-form input::placeholder {\n      color: var(--text-color);\n      opacity: 0.6;\n    }\n    .local-chat-form button {\n      border-radius: 30px;\n      background-color: var(--accent);\n      color: #fff;\n      padding: 0 1.25rem;\n    }\n    .btn-outline-primary {\n      border-color: var(--accent);\n      color: var(--accent);\n    }\n    .btn-outline-primary:hover {\n      background-color: var(--accent);\n      color: #fff;\n    }\n    @media (max-width: 768px) {\n      .video-frame, .chat-frame {\n        height: 300px;\n      }\n    }","size_bytes":3627},"templates/admin.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Admin Panel - PCYBER TV</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"/static/admin.css\">\n</head>\n<body>\n    <div class=\"container-fluid\">\n        <header class=\"py-3 mb-4\">\n            <div class=\"d-flex justify-content-between align-items-center\">\n                <h1 class=\"text-danger\">PCYBER TV Admin</h1>\n                <nav>\n                    <a href=\"/\" class=\"btn btn-outline-primary me-2\">View Site</a>\n                    <a href=\"/logout\" class=\"btn btn-outline-danger\">Logout</a>\n                </nav>\n            </div>\n        </header>\n\n        <div class=\"row\">\n            <div class=\"col-md-4\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h4>Add New Stream</h4>\n                    </div>\n                    <div class=\"card-body\">\n                        <form method=\"POST\" action=\"/admin\">\n                            <div class=\"mb-3\">\n                                <label for=\"title\" class=\"form-label\">Title</label>\n                                <input type=\"text\" class=\"form-control\" id=\"title\" name=\"title\" required>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"platform\" class=\"form-label\">Platform</label>\n                                <select class=\"form-control\" id=\"platform\" name=\"platform\" required>\n                                    <option value=\"YouTube\">YouTube</option>\n                                    <option value=\"Facebook\">Facebook</option>\n                                </select>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"video_id\" class=\"form-label\">Video ID/URL</label>\n                                <input type=\"text\" class=\"form-control\" id=\"video_id\" name=\"video_id\" required>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"category\" class=\"form-label\">Category</label>\n                                <input type=\"text\" class=\"form-control\" id=\"category\" name=\"category\" required>\n                            </div>\n                            <div class=\"d-grid\">\n                                <button type=\"submit\" class=\"btn btn-success\">Add Stream</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"col-md-8\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <div class=\"d-flex justify-content-between align-items-center\">\n                            <h4>Manage Streams</h4>\n                            <form method=\"GET\" action=\"/admin\" class=\"d-flex\">\n                                <input type=\"text\" name=\"search\" class=\"form-control me-2\" placeholder=\"Search...\" value=\"<?php echo htmlspecialchars($search_query ?? ''); ?>\">\n                                <button type=\"submit\" class=\"btn btn-outline-primary\">Search</button>\n                            </form>\n                        </div>\n                    </div>\n                    <div class=\"card-body\">\n                        <?php if (!empty($paginated_streams)): ?>\n                            <div class=\"table-responsive\">\n                                <table class=\"table table-striped\">\n                                    <thead>\n                                        <tr>\n                                            <th>Title</th>\n                                            <th>Platform</th>\n                                            <th>Category</th>\n                                            <th>Actions</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        <?php foreach ($paginated_streams as $index => $stream): ?>\n                                            <tr>\n                                                <td><?php echo htmlspecialchars($stream['title']); ?></td>\n                                                <td><?php echo htmlspecialchars($stream['platform']); ?></td>\n                                                <td><?php echo htmlspecialchars($stream['category']); ?></td>\n                                                <td>\n                                                    <a href=\"/edit/<?php echo $index; ?>\" class=\"btn btn-sm btn-warning\">Edit</a>\n                                                    <form method=\"POST\" action=\"/delete/<?php echo $index; ?>\" style=\"display: inline;\">\n                                                        <button type=\"submit\" class=\"btn btn-sm btn-danger\" onclick=\"return confirm('Are you sure?')\">Delete</button>\n                                                    </form>\n                                                </td>\n                                            </tr>\n                                        <?php endforeach; ?>\n                                    </tbody>\n                                </table>\n                            </div>\n                            \n                            <!-- Pagination -->\n                            <?php if ($total_pages > 1): ?>\n                                <nav>\n                                    <ul class=\"pagination justify-content-center\">\n                                        <?php for ($i = 1; $i <= $total_pages; $i++): ?>\n                                            <li class=\"page-item <?php echo $i == $page ? 'active' : ''; ?>\">\n                                                <a class=\"page-link\" href=\"/admin?page=<?php echo $i; ?><?php echo !empty($search_query) ? '&search=' . urlencode($search_query) : ''; ?>\"><?php echo $i; ?></a>\n                                            </li>\n                                        <?php endfor; ?>\n                                    </ul>\n                                </nav>\n                            <?php endif; ?>\n                        <?php else: ?>\n                            <p>No streams found.</p>\n                        <?php endif; ?>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":6712},"templates/admin_login.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Admin Login - PCYBER TV</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"/static/admin.css\">\n</head>\n<body>\n    <div class=\"container mt-5\">\n        <div class=\"row justify-content-center\">\n            <div class=\"col-md-4\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h3 class=\"text-center\">Admin Login</h3>\n                    </div>\n                    <div class=\"card-body\">\n                        <?php if (isset($_SESSION['message'])): ?>\n                            <div class=\"alert alert-<?php echo $_SESSION['message_type']; ?> alert-dismissible fade show\" role=\"alert\">\n                                <?php echo htmlspecialchars($_SESSION['message']); ?>\n                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                            </div>\n                            <?php unset($_SESSION['message'], $_SESSION['message_type']); ?>\n                        <?php endif; ?>\n\n                        <form method=\"POST\" action=\"/admin-login\">\n                            <div class=\"mb-3\">\n                                <label for=\"username\" class=\"form-label\">Username</label>\n                                <input type=\"text\" class=\"form-control\" id=\"username\" name=\"username\" required>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"password\" class=\"form-label\">Password</label>\n                                <input type=\"password\" class=\"form-control\" id=\"password\" name=\"password\" required>\n                            </div>\n                            <div class=\"d-grid\">\n                                <button type=\"submit\" class=\"btn btn-danger\">Login</button>\n                            </div>\n                        </form>\n                        \n                        <div class=\"text-center mt-3\">\n                            <p><a href=\"/\">Back to Home</a></p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":2496},"templates/dashboard.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Dashboard - PCYBER TV</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"/static/styles.css\">\n</head>\n<body>\n    <div class=\"container mt-5\">\n        <div class=\"row\">\n            <div class=\"col-12\">\n                <div class=\"d-flex justify-content-between align-items-center mb-4\">\n                    <h2>Welcome, <?php echo htmlspecialchars($_SESSION['username']); ?>!</h2>\n                    <div>\n                        <a href=\"/\" class=\"btn btn-outline-primary me-2\">Home</a>\n                        <a href=\"/logout-user\" class=\"btn btn-outline-danger\">Logout</a>\n                    </div>\n                </div>\n\n                <?php if (isset($_SESSION['message'])): ?>\n                    <div class=\"alert alert-<?php echo $_SESSION['message_type']; ?> alert-dismissible fade show\" role=\"alert\">\n                        <?php echo htmlspecialchars($_SESSION['message']); ?>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                    </div>\n                    <?php unset($_SESSION['message'], $_SESSION['message_type']); ?>\n                <?php endif; ?>\n\n                <div class=\"row\">\n                    <div class=\"col-md-6\">\n                        <div class=\"card\">\n                            <div class=\"card-header\">\n                                <h4>Your Account</h4>\n                            </div>\n                            <div class=\"card-body\">\n                                <p><strong>Username:</strong> <?php echo htmlspecialchars($_SESSION['username']); ?></p>\n                                <p><strong>User ID:</strong> <?php echo htmlspecialchars($_SESSION['user_id']); ?></p>\n                                <p class=\"text-muted\">Welcome to your dashboard! From here you can access all platform features.</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-md-6\">\n                        <div class=\"card\">\n                            <div class=\"card-header\">\n                                <h4>Quick Actions</h4>\n                            </div>\n                            <div class=\"card-body\">\n                                <a href=\"/\" class=\"btn btn-primary btn-block mb-2 w-100\">Browse Live Streams</a>\n                                <a href=\"/\" class=\"btn btn-success btn-block w-100\">Join Live Chat</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":2947},"templates/edit.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Edit Stream - PCYBER TV Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"/static/admin.css\">\n</head>\n<body>\n    <div class=\"container mt-5\">\n        <div class=\"row justify-content-center\">\n            <div class=\"col-md-6\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h3>Edit Stream</h3>\n                    </div>\n                    <div class=\"card-body\">\n                        <form method=\"POST\" action=\"/edit/<?php echo $index; ?>\">\n                            <div class=\"mb-3\">\n                                <label for=\"title\" class=\"form-label\">Title</label>\n                                <input type=\"text\" class=\"form-control\" id=\"title\" name=\"title\" value=\"<?php echo htmlspecialchars($stream['title']); ?>\" required>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"platform\" class=\"form-label\">Platform</label>\n                                <select class=\"form-control\" id=\"platform\" name=\"platform\" required>\n                                    <option value=\"YouTube\" <?php echo $stream['platform'] === 'YouTube' ? 'selected' : ''; ?>>YouTube</option>\n                                    <option value=\"Facebook\" <?php echo $stream['platform'] === 'Facebook' ? 'selected' : ''; ?>>Facebook</option>\n                                </select>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"video_id\" class=\"form-label\">Video ID/URL</label>\n                                <input type=\"text\" class=\"form-control\" id=\"video_id\" name=\"video_id\" value=\"<?php echo htmlspecialchars($stream['video_id']); ?>\" required>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"category\" class=\"form-label\">Category</label>\n                                <input type=\"text\" class=\"form-control\" id=\"category\" name=\"category\" value=\"<?php echo htmlspecialchars($stream['category']); ?>\" required>\n                            </div>\n                            <div class=\"d-flex justify-content-between\">\n                                <a href=\"/admin\" class=\"btn btn-secondary\">Cancel</a>\n                                <button type=\"submit\" class=\"btn btn-success\">Update Stream</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":2935},"templates/index.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <title>PCYBER TV - Live Sports Streaming</title>\n  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\n  <style>\n    :root {\n      --bg-color: #f8f9fa;\n      --text-color: #212529;\n      --card-bg: #ffffff;\n      --accent: #0d6efd;\n      --badge-bg: #e9ecef;\n      \n      /* Header always uses dark colors */\n      --header-bg-color: #01002c;\n      --header-text-color: #f1f1f1;\n      --header-card-bg: rgba(255, 255, 255, 0.05);\n      --header-badge-bg: #1a1e2d;\n    }\n   \n    body.dark-mode {\n      --bg-color: #01002c;               /* Very dark navy */\n      --text-color: #f1f1f1;             /* Light text */\n      --card-bg: rgba(255, 255, 255, 0.05); /* Semi-transparent glass card */\n      --accent: #4dabf7;                 /* Soft blue accent */\n      --badge-bg: #1a1e2d;               /* Refined dark for badges */\n    }\n\n    body {\n      background: var(--bg-color);\n      color: var(--text-color);\n      font-family: 'Segoe UI', sans-serif;\n      margin: 0;\n      min-height: 100vh;\n    }\n\n    /* Default to dark mode */\n    body {\n      background: #01002c;\n      color: #f1f1f1;\n    }\n\n    body.light-mode {\n      background: #f8f9fa;\n      color: #212529;\n    }\n\n    body.dark-mode {\n      background-color: var(--bg-color);\n      color: var(--text-color);\n      font-family: 'Inter', sans-serif;\n    }\n\n    /* Flashscore Header Styles - Always Dark */\n    .flashscore-header {\n      background-color: var(--header-bg-color);\n      color: var(--header-text-color);\n      position: sticky;\n      top: 0;\n      z-index: 1000;\n      margin-bottom: 2rem;\n      border-bottom: 1px solid var(--header-badge-bg);\n    }\n\n    .top-nav {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 16px;\n      border-bottom: 1px solid var(--header-badge-bg);\n    }\n\n    .logo {\n      display: flex;\n      align-items: center;\n      font-size: 18px;\n      font-weight: bold;\n      color: var(--header-text-color);\n      text-decoration: none;\n    }\n\n    .logo-icon {\n      width: 32px;\n      height: 24px;\n      margin-right: 8px;\n      background: linear-gradient(45deg, #ff6b35, #f7931e);\n      border-radius: 4px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n    }\n\n    .logo-icon::before {\n      content: '';\n      width: 16px;\n      height: 12px;\n      background: white;\n      border-radius: 2px;\n      transform: skew(-10deg);\n    }\n\n    .right-nav {\n      display: flex;\n      align-items: center;\n      gap: 16px;\n    }\n\n    .search-icon, .user-icon, .menu-icon {\n      width: 24px;\n      height: 24px;\n      cursor: pointer;\n      fill: var(--header-text-color);\n      transition: fill 0.2s;\n      opacity: 0.7;\n    }\n\n    .search-icon:hover, .user-icon:hover, .menu-icon:hover {\n      opacity: 1;\n    }\n\n    .main-nav {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 0 16px;\n      background-color: var(--header-bg-color);\n      height: 48px;\n      position: relative;\n    }\n\n    .nav-left {\n      display: flex;\n      align-items: center;\n      gap: 32px;\n    }\n\n    .nav-tabs {\n      display: flex;\n      align-items: center;\n      height: 48px;\n      gap: 0;\n    }\n\n    .nav-tab {\n      display: flex;\n      align-items: center;\n      padding: 0 20px;\n      height: 100%;\n      color: var(--header-text-color);\n      text-decoration: none;\n      font-size: 14px;\n      font-weight: 500;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      border-bottom: 3px solid transparent;\n      transition: all 0.2s;\n      position: relative;\n    }\n\n    .nav-tab:hover {\n      background-color: var(--header-card-bg);\n      border-bottom-color: #ff6b35;\n      color: var(--header-text-color);\n    }\n\n    .nav-tab.active {\n      border-bottom-color: #ff6b35;\n      background-color: var(--header-card-bg);\n    }\n\n    .nav-icon {\n      width: 18px;\n      height: 18px;\n      margin-right: 8px;\n      fill: currentColor;\n    }\n\n    .sports-nav {\n      display: flex;\n      align-items: center;\n      gap: 24px;\n    }\n\n    .favorite-icon {\n      width: 20px;\n      height: 20px;\n      fill: var(--header-text-color);\n      cursor: pointer;\n      transition: fill 0.2s;\n      opacity: 0.7;\n      position: relative;\n    }\n\n    .favorite-icon:hover {\n      fill: #ff6b35;\n      opacity: 1;\n    }\n\n    .sport-link {\n      color: var(--header-text-color);\n      text-decoration: none;\n      font-size: 13px;\n      font-weight: 500;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      padding: 8px 0;\n      border-bottom: 2px solid transparent;\n      transition: all 0.2s;\n      opacity: 0.7;\n      white-space: nowrap;\n    }\n\n    .sport-link:hover {\n      color: var(--header-text-color);\n      border-bottom-color: #ff6b35;\n      opacity: 1;\n    }\n\n    .sport-link.active {\n      color: var(--header-text-color);\n      border-bottom-color: #ff6b35;\n      opacity: 1;\n    }\n\n    .theme-toggle-header {\n      background: none;\n      border: none;\n      font-size: 1.2rem;\n      color: var(--header-text-color);\n      cursor: pointer;\n      padding: 0.5rem;\n      border-radius: 50%;\n      transition: all 0.2s;\n    }\n\n    .theme-toggle-header:hover {\n      background-color: var(--header-card-bg);\n    }\n\n    .notification-badge {\n      position: absolute;\n      top: -4px;\n      right: -4px;\n      background-color: #ff6b35;\n      color: white;\n      border-radius: 50%;\n      width: 18px;\n      height: 18px;\n      font-size: 10px;\n      font-weight: bold;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .container {\n      max-width: 1200px;\n      margin: 0 auto;\n      padding: 0 1rem;\n    }\n\n    .streams-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));\n      gap: 2rem;\n    }\n\n    .stream-card {\n      background: var(--card-bg);\n      border-radius: 12px;\n      box-shadow: 0 4px 15px rgba(13, 110, 253, 0.1);\n      transition: transform 0.3s ease, box-shadow 0.3s ease;\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n    }\n\n    .card {\n      background: var(--card-bg);\n      color: var(--text-color);\n      border-radius: 16px;\n      padding: 1.5rem;\n      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);\n      backdrop-filter: blur(18px);\n      -webkit-backdrop-filter: blur(18px);\n      border: 1px solid rgba(255, 255, 255, 0.08);\n      transition: transform 0.3s ease, box-shadow 0.3s ease;\n    }\n\n    .card:hover {\n      transform: translateY(-5px);\n      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.4);\n    }\n\n    .stream-card:hover {\n      transform: translateY(-6px);\n      box-shadow: 0 6px 20px rgba(13, 110, 253, 0.2);\n    }\n\n    body.dark-mode .stream-card {\n      background: var(--card-bg);\n      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);\n      backdrop-filter: blur(18px);\n      -webkit-backdrop-filter: blur(18px);\n      border: 1px solid rgba(255, 255, 255, 0.08);\n    }\n\n    body.dark-mode .stream-card:hover {\n      transform: translateY(-5px);\n      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.4);\n    }\n\n    .stream-video {\n      position: relative;\n      padding-top: 56.25%;\n      overflow: hidden;\n      border-radius: 12px 12px 0 0;\n    }\n\n    .stream-video iframe {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      border: none;\n    }\n\n    .stream-content {\n      padding: 1rem;\n      flex-grow: 1;\n    }\n\n    .stream-title {\n      font-size: 1.15rem;\n      font-weight: 600;\n      margin-bottom: 0.5rem;\n    }\n\n    .badge-category {\n      background-color: #c80037a3;\n      font-size: 0.6rem;\n      font-weight: 500;\n      color: var(--text-color);\n      padding: 4px 10px 4px 10px;\n      border-radius: 20px;\n      display: inline-block;\n      margin-bottom: 0.75rem;\n    }\n\n    .btn-view {\n      padding: 0.5rem 1.2rem;\n      font-weight: 600;\n      border-radius: 25px;\n    }\n\n    /* Chat styles */\n    .chat-container {\n      background: var(--card-bg);\n      border-radius: 16px;\n      padding: 1.5rem;\n      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);\n      backdrop-filter: blur(18px);\n      -webkit-backdrop-filter: blur(18px);\n      border: 1px solid rgba(255, 255, 255, 0.08);\n    }\n\n    .chat-messages {\n      height: 300px;\n      overflow-y: auto;\n      background: rgba(255, 255, 255, 0.02);\n      border-radius: 8px;\n      padding: 1rem;\n      margin-bottom: 1rem;\n    }\n\n    /* Mobile Responsive */\n    @media (max-width: 768px) {\n      .main-nav {\n        flex-direction: column;\n        height: auto;\n        padding: 0;\n      }\n\n      .nav-left {\n        width: 100%;\n        flex-direction: column;\n        gap: 0;\n      }\n\n      .nav-tabs {\n        width: 100%;\n        height: 48px;\n        border-bottom: 1px solid var(--header-badge-bg);\n        justify-content: flex-start;\n        gap: 0;\n      }\n\n      .nav-tab {\n        flex: 1;\n        justify-content: center;\n        text-align: center;\n        height: 48px;\n        padding: 0 16px;\n        min-width: 0;\n      }\n\n      .sports-nav {\n        width: 100%;\n        justify-content: flex-start;\n        padding: 12px 16px;\n        overflow-x: auto;\n        gap: 20px;\n      }\n\n      .streams-grid {\n        grid-template-columns: 1fr;\n      }\n\n      .container {\n        padding: 0 0.5rem;\n      }\n    }\n  </style>\n</head>\n<body class=\"dark-mode\">\n  <!-- Flashscore Header -->\n  <header class=\"flashscore-header\">\n    <!-- Top Navigation -->\n    <div class=\"top-nav\">\n      <a href=\"/\" class=\"logo\">\n        <div class=\"logo-icon\"></div>\n        PCYBER TV\n      </a>\n  \n      <div class=\"right-nav\">\n        <svg class=\"search-icon\" viewBox=\"0 0 24 24\"><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/></svg>\n        <div style=\"position: relative;\">\n          <svg class=\"user-icon\" viewBox=\"0 0 24 24\"><path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/></svg>\n        </div>\n        <svg class=\"menu-icon\" viewBox=\"0 0 24 24\"><path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"/></svg>\n      </div>\n    </div>\n    <nav class=\"main-nav\">\n      <div class=\"nav-left\">\n        <div class=\"nav-tabs\">\n          <a href=\"/\" class=\"nav-tab active\">\n            <svg class=\"nav-icon\" viewBox=\"0 0 24 24\">\n              <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\"/>\n            </svg>\n            STREAMS\n          </a>\n          <?php if (isset($_SESSION['user_id'])): ?>\n            <a href=\"/dashboard\" class=\"nav-tab\">\n              <svg class=\"nav-icon\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z\"/>\n              </svg>\n              DASHBOARD\n            </a>\n          <?php endif; ?>\n        </div>\n        <div class=\"sports-nav\">\n          <div style=\"position: relative;\">\n            <svg class=\"favorite-icon\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"/>\n            </svg>\n            <div class=\"notification-badge\"><?php echo count(StreamManager::loadStreams()); ?></div>\n          </div>\n          <a href=\"/category/football\" class=\"sport-link active\">FOOTBALL</a>\n          <a href=\"/category/basketball\" class=\"sport-link\">BASKETBALL</a>\n          <a href=\"/category/tennis\" class=\"sport-link\">TENNIS</a>\n          <a href=\"/category/church\" class=\"sport-link\">CHURCH</a>\n          <a href=\"/category/entertainment\" class=\"sport-link\">ENTERTAINMENT</a>\n          <?php if (isset($_SESSION['user_id'])): ?>\n            <a href=\"/logout-user\" class=\"sport-link\">LOGOUT</a>\n          <?php else: ?>\n            <a href=\"/login\" class=\"sport-link\">LOGIN</a>\n            <a href=\"/signup\" class=\"sport-link\">SIGNUP</a>\n          <?php endif; ?>\n        </div>\n      </div>\n      <button class=\"theme-toggle-header\" onclick=\"toggleTheme()\" title=\"Toggle Light/Dark\">☀️</button>\n    </nav>\n  </header>\n\n  <?php if (isset($_SESSION['message'])): ?>\n    <div class=\"container\">\n      <div class=\"alert alert-<?php echo $_SESSION['message_type']; ?> alert-dismissible fade show\" role=\"alert\">\n          <?php echo htmlspecialchars($_SESSION['message']); ?>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n      </div>\n    </div>\n    <?php unset($_SESSION['message'], $_SESSION['message_type']); ?>\n  <?php endif; ?>\n\n  <div class=\"container\">\n\n    <?php if (isset($selected_category)): ?>\n      <div class=\"mb-4\">\n        <h5 class=\"text-muted\">Showing results for category: <strong><?php echo htmlspecialchars($selected_category); ?></strong></h5>\n        <a href=\"/\" class=\"btn btn-outline-secondary btn-sm\">↩ Back to All Streams</a>\n      </div>\n    <?php endif; ?>\n    \n    <section class=\"streams-grid\" id=\"streamList\">\n      <?php if (isset($initial_streams)): $streams = $initial_streams; endif; ?>\n      <?php if (!empty($streams)): ?>\n        <?php foreach ($streams as $index => $stream): ?>\n          <div class=\"stream-card\">\n            <div class=\"stream-video\">\n              <?php if ($stream['platform'] == 'YouTube'): ?>\n                <iframe src=\"https://www.youtube.com/embed/<?php echo htmlspecialchars($stream['video_id']); ?>\" allowfullscreen></iframe>\n              <?php elseif ($stream['platform'] == 'Facebook'): ?>\n                <iframe src=\"https://www.facebook.com/plugins/video.php?href=<?php echo urlencode($stream['video_id']); ?>&show_text=0&width=560\" allowfullscreen></iframe>\n              <?php else: ?>\n                <p class=\"text-danger p-3\">Unsupported platform</p>\n              <?php endif; ?>\n            </div>\n            <div class=\"stream-content\">\n              <div class=\"stream-title\"><?php echo htmlspecialchars($stream['title']); ?></div>\n              <a href=\"/category/<?php echo urlencode($stream['category']); ?>\" class=\"badge-category text-decoration-none\"><?php echo htmlspecialchars($stream['category']); ?></a><br>\n              <a href=\"/stream/<?php echo $index; ?>\" class=\"btn btn-primary btn-view\">View Stream</a>\n            </div>\n          </div>\n        <?php endforeach; ?>\n      <?php else: ?>\n        <p>No streams available.</p>\n      <?php endif; ?>\n    </section>\n    \n    <?php if (!isset($selected_category)): ?>\n      <button id=\"loadMoreBtn\" class=\"btn btn-outline-primary\" style=\"display: block; margin: 2rem auto; border-radius: 25px; font-weight: 600; padding: 0.5rem 1.2rem;\">\n        Load More Streams\n      </button>\n    <?php endif; ?>\n    \n    <div class=\"row mt-5\">\n      <div class=\"col-md-8\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <h4>Welcome to PCYBER TV</h4>\n            <p>Your premier destination for live sports streaming and entertainment. Watch your favorite teams and events in high quality.</p>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-4\">\n        <div class=\"chat-container\">\n          <h4>Live Chat</h4>\n          <div class=\"chat-messages\">\n            <?php\n            $chat = StreamManager::loadChat();\n            foreach ($chat as $message):\n            ?>\n              <div class=\"mb-2\">\n                <strong><?php echo htmlspecialchars($message['user']); ?>:</strong>\n                <?php echo htmlspecialchars($message['message']); ?>\n              </div>\n            <?php endforeach; ?>\n          </div>\n          \n          <form method=\"POST\" action=\"/chat\">\n            <div class=\"mb-3\">\n              <input type=\"text\" name=\"user\" class=\"form-control\" placeholder=\"Your name\" required>\n            </div>\n            <div class=\"mb-3\">\n              <textarea name=\"message\" class=\"form-control\" placeholder=\"Your message\" required></textarea>\n            </div>\n            <button type=\"submit\" class=\"btn btn-success w-100\">Send Message</button>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n<!-- DESKTOP FOOTER HTML -->\n<footer class=\"desktop-footer\">\n  <div class=\"footer-content\">\n    <div class=\"footer-top\">\n      <div class=\"footer-section\">\n        <h3>Sports</h3>\n        <div class=\"sports-grid\">\n          <a href=\"/category/football\">Football</a>\n          <a href=\"/category/basketball\">Basketball</a>\n          <a href=\"/category/tennis\">Tennis</a>\n          <a href=\"/category/church\">Church</a>\n          <a href=\"/category/entertainment\">Entertainment</a>\n        </div>\n      </div>\n      \n      <div class=\"footer-section\">\n        <h3>Platform</h3>\n        <ul>\n          <li><a href=\"/\">Home</a></li>\n          <li><a href=\"/login\">Login</a></li>\n          <li><a href=\"/signup\">Sign Up</a></li>\n          <?php if (isset($_SESSION['user_id'])): ?>\n            <li><a href=\"/dashboard\">Dashboard</a></li>\n          <?php endif; ?>\n        </ul>\n      </div>\n      \n      <div class=\"footer-section\">\n        <h3>Support</h3>\n        <ul>\n          <li><a href=\"#\">Live Chat</a></li>\n          <li><a href=\"#\">Contact Us</a></li>\n          <li><a href=\"#\">FAQ</a></li>\n          <li><a href=\"#\">Help</a></li>\n        </ul>\n      </div>\n      \n      <div class=\"footer-section\">\n        <h3>Follow Us</h3>\n        <div class=\"social-links\">\n          <a href=\"#\" class=\"social-link\">\n            <svg viewBox=\"0 0 24 24\">\n              <path d=\"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z\"/>\n            </svg>\n          </a>\n          <a href=\"#\" class=\"social-link\">\n            <svg viewBox=\"0 0 24 24\">\n              <path d=\"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z\"/>\n            </svg>\n          </a>\n          <a href=\"#\" class=\"social-link\">\n            <svg viewBox=\"0 0 24 24\">\n              <path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\"/>\n            </svg>\n          </a>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"footer-bottom\">\n      <div class=\"footer-bottom-content\">\n        <div class=\"footer-logo\">\n          <div class=\"footer-logo-icon\"></div>\n          PCYBER TV\n        </div>\n        \n        <div class=\"footer-legal\">\n          <a href=\"/\">Home</a>\n          <a href=\"/login\">Login</a>\n          <a href=\"/signup\">Sign Up</a>\n        </div>\n      </div>\n      \n      <div class=\"footer-disclaimer\">\n        <p>PCYBER TV - Your premier destination for live sports streaming and entertainment.</p>\n        <p class=\"betting-warning\">You must be 18+ to access streaming content.</p>\n      </div>\n    </div>\n  </div>\n</footer>\n\n<!-- MOBILE STICKY FOOTER HTML -->\n<footer class=\"mobile-footer\">\n  <nav class=\"mobile-nav\">\n    <a href=\"/\" class=\"mobile-nav-item active\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/>\n      </svg>\n      <span>Home</span>\n    </a>\n    \n    <a href=\"/category/football\" class=\"mobile-nav-item\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/>\n      </svg>\n      <span>Sports</span>\n    </a>\n    \n    <a href=\"#\" class=\"mobile-nav-item\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\"/>\n      </svg>\n      <span>Chat</span>\n    </a>\n    \n    <?php if (isset($_SESSION['user_id'])): ?>\n      <a href=\"/dashboard\" class=\"mobile-nav-item\">\n        <svg viewBox=\"0 0 24 24\">\n          <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z\"/>\n        </svg>\n        <span>Account</span>\n      </a>\n    <?php else: ?>\n      <a href=\"/login\" class=\"mobile-nav-item\">\n        <svg viewBox=\"0 0 24 24\">\n          <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/>\n        </svg>\n        <span>Login</span>\n      </a>\n    <?php endif; ?>\n  </nav>\n</footer>\n\n<style>\n/* Footer Styles */\n.desktop-footer {\n  background: var(--header-bg-color);\n  color: var(--header-text-color);\n  margin-top: 4rem;\n  padding: 3rem 0 1rem 0;\n}\n\n.footer-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 1rem;\n}\n\n.footer-top {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 2rem;\n  margin-bottom: 2rem;\n}\n\n.footer-section h3 {\n  color: #ff6b35;\n  margin-bottom: 1rem;\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n.footer-section ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.footer-section ul li {\n  margin-bottom: 0.5rem;\n}\n\n.footer-section a {\n  color: var(--header-text-color);\n  text-decoration: none;\n  opacity: 0.8;\n  transition: opacity 0.2s;\n}\n\n.footer-section a:hover {\n  opacity: 1;\n  color: #ff6b35;\n}\n\n.sports-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.5rem;\n}\n\n.social-links {\n  display: flex;\n  gap: 1rem;\n}\n\n.social-link {\n  width: 40px;\n  height: 40px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n\n.social-link:hover {\n  background: #ff6b35;\n  transform: translateY(-2px);\n}\n\n.social-link svg {\n  width: 20px;\n  height: 20px;\n  fill: currentColor;\n}\n\n.footer-bottom {\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  padding-top: 2rem;\n}\n\n.footer-bottom-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.footer-logo {\n  display: flex;\n  align-items: center;\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.footer-logo-icon {\n  width: 32px;\n  height: 24px;\n  margin-right: 8px;\n  background: linear-gradient(45deg, #ff6b35, #f7931e);\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.footer-logo-icon::before {\n  content: '';\n  width: 16px;\n  height: 12px;\n  background: white;\n  border-radius: 2px;\n  transform: skew(-10deg);\n}\n\n.footer-legal {\n  display: flex;\n  gap: 2rem;\n  flex-wrap: wrap;\n}\n\n.footer-disclaimer {\n  text-align: center;\n  font-size: 0.85rem;\n  opacity: 0.7;\n  line-height: 1.5;\n}\n\n.betting-warning {\n  margin-top: 1rem;\n  font-weight: 500;\n  color: #ff6b35;\n}\n\n/* Mobile Footer */\n.mobile-footer {\n  display: none;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: var(--header-bg-color);\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  z-index: 1000;\n}\n\n.mobile-nav {\n  display: flex;\n  justify-content: space-around;\n  padding: 0.5rem 0;\n}\n\n.mobile-nav-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-decoration: none;\n  color: var(--header-text-color);\n  opacity: 0.7;\n  transition: all 0.2s;\n  padding: 0.5rem;\n  border-radius: 8px;\n}\n\n.mobile-nav-item.active,\n.mobile-nav-item:hover {\n  opacity: 1;\n  color: #ff6b35;\n}\n\n.mobile-nav-item svg {\n  width: 20px;\n  height: 20px;\n  margin-bottom: 0.25rem;\n  fill: currentColor;\n}\n\n.mobile-nav-item span {\n  font-size: 0.7rem;\n  font-weight: 500;\n}\n\n@media (max-width: 768px) {\n  .desktop-footer {\n    display: none;\n  }\n  \n  .mobile-footer {\n    display: block;\n  }\n  \n  body {\n    padding-bottom: 80px;\n  }\n}\n</style>\n\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\n<script>\n  // Theme toggle functionality\n  function toggleTheme() {\n    const body = document.body;\n    if (body.classList.contains('dark-mode')) {\n      body.classList.remove('dark-mode');\n      body.classList.add('light-mode');\n      localStorage.setItem('theme', 'light');\n    } else {\n      body.classList.remove('light-mode');\n      body.classList.add('dark-mode');\n      localStorage.setItem('theme', 'dark');\n    }\n  }\n  \n  // Load saved theme\n  document.addEventListener('DOMContentLoaded', function() {\n    const savedTheme = localStorage.getItem('theme') || 'dark';\n    if (savedTheme === 'light') {\n      document.body.classList.remove('dark-mode');\n      document.body.classList.add('light-mode');\n    }\n  });\n\n  // Load more streams functionality\n  document.getElementById('loadMoreBtn')?.addEventListener('click', function() {\n    const currentStreams = document.querySelectorAll('.stream-card').length;\n    fetch(`/load_more_streams?offset=${currentStreams}&limit=6`)\n      .then(response => response.json())\n      .then(data => {\n        const container = document.getElementById('streamList');\n        data.streams.forEach((stream, index) => {\n          const streamIndex = currentStreams + index;\n          const streamHtml = `\n            <div class=\"stream-card\">\n              <div class=\"stream-video\">\n                ${stream.platform === 'YouTube' ? \n                  `<iframe src=\"https://www.youtube.com/embed/${stream.video_id}\" allowfullscreen></iframe>` :\n                  stream.platform === 'Facebook' ?\n                  `<iframe src=\"https://www.facebook.com/plugins/video.php?href=${encodeURIComponent(stream.video_id)}&show_text=0&width=560\" allowfullscreen></iframe>` :\n                  '<p class=\"text-danger p-3\">Unsupported platform</p>'\n                }\n              </div>\n              <div class=\"stream-content\">\n                <div class=\"stream-title\">${stream.title}</div>\n                <a href=\"/category/${encodeURIComponent(stream.category)}\" class=\"badge-category text-decoration-none\">${stream.category}</a><br>\n                <a href=\"/stream/${streamIndex}\" class=\"btn btn-primary btn-view\">View Stream</a>\n              </div>\n            </div>\n          `;\n          container.insertAdjacentHTML('beforeend', streamHtml);\n        });\n        \n        if (!data.has_more) {\n          this.style.display = 'none';\n        }\n      })\n      .catch(console.error);\n  });\n</script>\n</body>\n</html>","size_bytes":28442},"templates/login.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Login - PCYBER TV</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"/static/styles.css\">\n</head>\n<body>\n    <div class=\"container mt-5\">\n        <div class=\"row justify-content-center\">\n            <div class=\"col-md-6\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h3 class=\"text-center\">Login to PCYBER TV</h3>\n                    </div>\n                    <div class=\"card-body\">\n                        <?php if (isset($_SESSION['message'])): ?>\n                            <div class=\"alert alert-<?php echo $_SESSION['message_type']; ?> alert-dismissible fade show\" role=\"alert\">\n                                <?php echo htmlspecialchars($_SESSION['message']); ?>\n                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                            </div>\n                            <?php unset($_SESSION['message'], $_SESSION['message_type']); ?>\n                        <?php endif; ?>\n\n                        <form method=\"POST\" action=\"/login\">\n                            <div class=\"mb-3\">\n                                <label for=\"email\" class=\"form-label\">Email</label>\n                                <input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\" required>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"password\" class=\"form-label\">Password</label>\n                                <input type=\"password\" class=\"form-control\" id=\"password\" name=\"password\" required>\n                            </div>\n                            <div class=\"d-grid\">\n                                <button type=\"submit\" class=\"btn btn-primary\">Login</button>\n                            </div>\n                        </form>\n                        \n                        <div class=\"text-center mt-3\">\n                            <p>Don't have an account? <a href=\"/signup\">Sign up here</a></p>\n                            <p><a href=\"/\">Back to Home</a></p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":2575},"templates/signup.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Sign Up - PCYBER TV</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"/static/styles.css\">\n</head>\n<body>\n    <div class=\"container mt-5\">\n        <div class=\"row justify-content-center\">\n            <div class=\"col-md-6\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h3 class=\"text-center\">Join PCYBER TV</h3>\n                    </div>\n                    <div class=\"card-body\">\n                        <?php if (isset($_SESSION['message'])): ?>\n                            <div class=\"alert alert-<?php echo $_SESSION['message_type']; ?> alert-dismissible fade show\" role=\"alert\">\n                                <?php echo htmlspecialchars($_SESSION['message']); ?>\n                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                            </div>\n                            <?php unset($_SESSION['message'], $_SESSION['message_type']); ?>\n                        <?php endif; ?>\n\n                        <form method=\"POST\" action=\"/signup\">\n                            <div class=\"mb-3\">\n                                <label for=\"username\" class=\"form-label\">Username</label>\n                                <input type=\"text\" class=\"form-control\" id=\"username\" name=\"username\" required>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"email\" class=\"form-label\">Email</label>\n                                <input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\" required>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"password\" class=\"form-label\">Password</label>\n                                <input type=\"password\" class=\"form-control\" id=\"password\" name=\"password\" required>\n                            </div>\n                            <div class=\"d-grid\">\n                                <button type=\"submit\" class=\"btn btn-success\">Sign Up</button>\n                            </div>\n                        </form>\n                        \n                        <div class=\"text-center mt-3\">\n                            <p>Already have an account? <a href=\"/login\">Login here</a></p>\n                            <p><a href=\"/\">Back to Home</a></p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":2859},"templates/stream.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title><?php echo htmlspecialchars($stream['title']); ?> - PCYBER TV</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"/static/styles.css\">\n</head>\n<body>\n    <div class=\"container-fluid\">\n        <header class=\"py-3 mb-4\">\n            <div class=\"d-flex justify-content-between align-items-center\">\n                <h1 class=\"text-primary\">PCYBER TV</h1>\n                <nav>\n                    <a href=\"/\" class=\"btn btn-outline-primary\">Back to Home</a>\n                </nav>\n            </div>\n        </header>\n\n        <div class=\"row\">\n            <div class=\"col-md-8\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h3><?php echo htmlspecialchars($stream['title']); ?></h3>\n                        <p class=\"text-muted mb-0\">\n                            Platform: <?php echo htmlspecialchars($stream['platform']); ?> | \n                            Category: <?php echo htmlspecialchars($stream['category']); ?>\n                        </p>\n                    </div>\n                    <div class=\"card-body\">\n                        <?php if ($stream['platform'] === 'YouTube'): ?>\n                            <div class=\"ratio ratio-16x9\">\n                                <iframe src=\"https://www.youtube.com/embed/<?php echo htmlspecialchars($stream['video_id']); ?>\" \n                                        title=\"<?php echo htmlspecialchars($stream['title']); ?>\"\n                                        frameborder=\"0\" \n                                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" \n                                        allowfullscreen>\n                                </iframe>\n                            </div>\n                        <?php elseif ($stream['platform'] === 'Facebook'): ?>\n                            <div class=\"ratio ratio-16x9\">\n                                <iframe src=\"<?php echo htmlspecialchars($stream['video_id']); ?>\" \n                                        title=\"<?php echo htmlspecialchars($stream['title']); ?>\"\n                                        frameborder=\"0\" \n                                        allowfullscreen>\n                                </iframe>\n                            </div>\n                        <?php else: ?>\n                            <div class=\"alert alert-warning\">\n                                <p>Unsupported platform: <?php echo htmlspecialchars($stream['platform']); ?></p>\n                                <p>Video ID: <?php echo htmlspecialchars($stream['video_id']); ?></p>\n                            </div>\n                        <?php endif; ?>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"col-md-4\">\n                <h3>Live Chat</h3>\n                <div id=\"chat-messages\" class=\"border p-3 mb-3\" style=\"height: 400px; overflow-y: scroll;\">\n                    <?php\n                    $chat = StreamManager::loadChat();\n                    foreach ($chat as $message):\n                    ?>\n                        <div class=\"mb-2\">\n                            <strong><?php echo htmlspecialchars($message['user']); ?>:</strong>\n                            <?php echo htmlspecialchars($message['message']); ?>\n                        </div>\n                    <?php endforeach; ?>\n                </div>\n                \n                <form method=\"POST\" action=\"/chat\">\n                    <div class=\"mb-3\">\n                        <input type=\"text\" name=\"user\" class=\"form-control\" placeholder=\"Your name\" required>\n                    </div>\n                    <div class=\"mb-3\">\n                        <textarea name=\"message\" class=\"form-control\" placeholder=\"Your message\" required></textarea>\n                    </div>\n                    <button type=\"submit\" class=\"btn btn-success w-100\">Send Message</button>\n                </form>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":4374},"templates/style.css":{"content":" :root {\n      --bg-color: #f8f9fa;\n      --text-color: #212529;\n      --card-bg: #fff;\n    }\n\n    body.dark-mode {\n      --bg-color: #01002c;\n      --text-color: #f1f1f1;\n      --card-bg: rgba(255, 255, 255, 0.05);\n      --accent: #4dabf7;\n      --badge-bg: #1a1e2d;\n    }\n\n    body {\n      background-color: var(--bg-color);\n      color: var(--text-color);\n      font-family: 'Inter', sans-serif;\n      min-height: 100vh;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      padding: 2rem;\n      text-align: center;\n    }\n\n    .logo {\n      max-width: 120px;\n      margin-bottom: 1rem;\n    }\n\n    .card {\n      background: var(--card-bg);\n      color: var(--text-color);\n      border-radius: 16px;\n      padding: 2rem 2.5rem;\n      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);\n      backdrop-filter: blur(18px);\n      -webkit-backdrop-filter: blur(18px);\n      border: 1px solid rgba(255, 255, 255, 0.08);\n      width: 100%;\n      max-width: 400px;\n    }\n\n    .theme-toggle {\n      position: absolute;\n      top: 1rem;\n      right: 1rem;\n      background: none;\n      border: none;\n      font-size: 1.5rem;\n      cursor: pointer;\n      color: var(--text-color);\n    }\n\n    .form-control::placeholder {\n      color: var(--text-color);\n      opacity: 0.6;\n    }\n\n    .form-control:focus {\n      border-color: #0d6efd;\n      box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);\n    }","size_bytes":1441}},"version":1}